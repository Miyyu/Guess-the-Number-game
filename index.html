<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&display=swap" rel="stylesheet">-->
    <link href="https://fonts.googleapis.com/css2?family=Walter+Turncoat&display=swap" rel="stylesheet">
    <title>Adivinhe o Número</title>

    <style>
        *{
            /*font-family: 'Amatic SC', cursive;*/
            font-family: 'Walter Turncoat', cursive;
        }

        body{
            width: 50%;
            margin: auto;
            background-color: #f0efeb;
            text-align: center;
        }

        h1{
            text-shadow: 0.1em 0.1em 0.5em black
        }

        p{
            font-size: 30px;
        }

        .submitPalpite, button{
            background-color: #cce3de;
            border-radius: 10px;
            padding: 10px;
            font-size: 20px;
            box-shadow: 0 9px #999
        }

        .submitPalpite:active, button:active { /*quando o botão é clicado*/
            background-color: #3e8e41;
            box-shadow: 0 5px #666;
            transform: translateY(4px);
        }

        label{
            font-size: 25px;
        }
        
    </style>
</head>
<body>
    <h1>Adivinhe o Número</h1>

    <p>Iremos gerar um número aleatório de 1 a 100 e você deverá descobrir o número. Você terá <b>10</b> chances
        para tentar adivinhar esse número.
    </p>

    <div class="form">
        <label for="campoPalpite">Digite seu palpite:</label>
        <input type="text" id="campoPalpite" class="campoPalpite">
        <input type="submit" value="Enviar" class="submitPalpite">
    </div>

    <div class="palpite">
        <p class="valoresAnteriores"></p>
        <p class="certoOUerrado"></p>
        <p class="dica"></p>
    </div>

    <script>
        var numeroAleatorio= Math.floor(Math.random() * 100) + 1; //Gerando numero aleatório

        var palpites = document.querySelector('.valoresAnteriores'); //Atribuindo  valores para os p da div
        var certoOUerrado = document.querySelector('.certoOUerrado');
        var dica = document.querySelector('.dica');

        var envioPalpite = document.querySelector('.submitPalpite'); //atribuindo valor para o botão de envio
        var valorPalpite = document.querySelector('.campoPalpite'); //atribuindo a caixa de texto

        var contPalpites = 1; //iniciar a quantidade de vezes de jogadas
        var botaoReinicio;

        function conferirPalpite(){ //conferir o valor digitado pelo usuário
            var palpiteUsuario = Number(valorPalpite.value); //recebe o valor digitado e faz com que seja um number

            if(palpiteUsuario < 1 || palpiteUsuario > 100){
                window.alert("Insira apenas valores de 1 a 100!");
                contPalpites--;
            }
            else{

                if(contPalpites === 1){ //se a quantidade de jogadas for = 1, coloca as info que estavam ocultadas
                    palpites.textContent = 'Valores Anteriores: '; //.textcontent serve para atribuir texto
                }
                palpites.textContent += palpiteUsuario + " "; // concatenando o que foi digitado com o que tava antes

                if(palpiteUsuario === numeroAleatorio){ //verificando as jogadas
                    certoOUerrado.textContent = 'PARABÉNS! VOCÊ ACERTOU.';
                    certoOUerrado.style.backgroundColor = 'green'; //deixa o fundo de onde está o p certoOUerrado verde
                    dica.textContent = ''; //sumindo com as dicas
                    fimDeJogo();
                }
                else if(contPalpites === 10){ //verifica se o usuário jogou 10x
                    certoOUerrado.textContent = 'Você perdeu! O número era ' + numeroAleatorio;
                    certoOUerrado.style.backgroundColor = 'grey'; //deixa o fundo cinza
                    dica.textContent = '';
                    fimDeJogo();
                }
                else{ //se não excedeu o limite de jogas e não está certo
                    certoOUerrado.textContent = 'Errado!';
                    certoOUerrado.style.backgroundColor = 'red';

                    if(palpiteUsuario < numeroAleatorio){ //verifica se o palpite do usuário está abaixo do valor gerado
                        dica.textContent = 'Palpite baixo';
                    }
                    else if(palpiteUsuario > numeroAleatorio){
                        dica.textContent = 'Palpite alto';
                    }
                }
            }            
                        
            contPalpites++; //incremento a contagem das jogadas
            campoPalpite.value = ''; //zero o campo de palpite para digitar
            campoPalpite.focus(); //focar no campo de palpite
        }

        envioPalpite.addEventListener('click', conferirPalpite); //adicionando um evento para o botão de submit palpite, onde passamos 2 parametros, sendo que a função conferirPalpite é acionada se houver um clique no botão submit

        function fimDeJogo(){
            envioPalpite.disabled = true; //desabilitando o campo palpite para não ser inserido mais nada, disable = true
            valorPalpite.disabled = true;
            botaoReinicio = document.createElement('button'); //criando um novo botão e inserindo no final do body.
            botaoReinicio.textContent = 'Iniciar novo jogo';
            document.body.appendChild(botaoReinicio); //"Adiciona um nó ao final da lista de filhos de um nó pai especificado."
            botaoReinicio.addEventListener('click', reiniciarJogo); //add evento de clique para chamar a função renicarJogo       
        }

        function reiniciarJogo(){
            contPalpites = 1;

            var reinicarDiv = document.querySelectorAll('.palpite p'); //criando variável para reiniciar a div dos palpites, selecioando tudo que estiver nessa div, não esquecendo de colocar o p em seguida
            
            for(var i = 0; i < reinicarDiv.length; i++){ //for para percorrer a div, com o tamanho dos argumentos que ela tem
                reinicarDiv[i].textContent = ''; //zerando os textos de cada indice da div Palpites
            }

            botaoReinicio.parentNode.removeChild(botaoReinicio); //removendo o botão de reinicio

            envioPalpite.disabled = false; //habilitando o input e o botão
            valorPalpite.disabled = false;
            valorPalpite.value = ''; //zerando campo palpite
            valorPalpite.focus();

            certoOUerrado.style.backgroundColor = 'white'; //retornando o fundo do certoOUerrado para branco
            numeroAleatorio = Math.floor(Math.random() * 100) + 1; //gerando outro numero aleatorio;
        }

    </script>
    
</body>
</html>